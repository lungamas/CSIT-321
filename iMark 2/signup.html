<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>iMark â€¢ Sign Up</title>
  <style>
    :root{
      --gradient-dark:#131613;
      --gradient-light:#138C3D;
      --ink:#ffffff;
      --field:#666D66;
      --accent:#16A348;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      font-family:"Poppins", Arial, sans-serif;
      color:var(--ink);
      background:linear-gradient(145deg,var(--gradient-dark) 0%, var(--gradient-dark) 25%, var(--gradient-light) 100%);
      display:flex; align-items:center; justify-content:center;
      position:relative; overflow:hidden;
    }

    .bg-logo{position:fixed; inset:0; display:flex; align-items:center; justify-content:center; pointer-events:none; z-index:0;}
    .bg-logo img{width:1600px; opacity:.18; filter:blur(2.5px); transform:translateY(40px);}

    .brand{position:fixed; top:24px; left:32px; z-index:2;}
    .brand img{height:85px; width:auto; opacity:.95; transition:opacity .2s; cursor:pointer;}
    .brand img:hover{opacity:.8;}

    .form-stack{
      width:100%; max-width:420px;
      display:flex; flex-direction:column; align-items:center; gap:24px;
      z-index:5;
    }
    .field{
      display:flex; align-items:center; gap:14px;
      background:rgba(102,109,102,.92); color:#fff;
      border-radius:22px; padding:18px 26px; width:100%; height:78px;
      box-shadow:0 8px 25px rgba(0,0,0,.25);
    }
    .field svg{width:24px; height:24px; flex:0 0 24px; opacity:.95}
    .field input{
      background:transparent; border:none; outline:none; color:#fff;
      width:100%; font-size:18px; font-weight:600;
    }
    .btn{
      display:inline-block; text-align:center; text-decoration:none;
      background:var(--accent); color:#0b1810;
      padding:18px 28px; border-radius:999px; width:240px;
      font-size:18px; font-weight:700; letter-spacing:.5px;
      box-shadow:0 8px 20px rgba(0,0,0,.25), inset 0 -3px 0 rgba(0,0,0,.15);
      transition:transform .08s ease, filter .2s ease;
      border:none; cursor:pointer;
    }
    .btn:hover{filter:brightness(.95)} .btn:active{transform:translateY(1px)}
    .alt{margin-top:10px; color:#e7e7e7; text-align:center; font-size:15px;}
    .alt a{color:#fff; font-weight:700} .alt a:hover{text-decoration:underline}

    footer{position:fixed; right:24px; bottom:18px; color:#d1d5db; font-size:12px; letter-spacing:.04em; opacity:.9; z-index:2;}

    @media (max-width:640px){
      .brand img{height:60px}
      .bg-logo img{width:900px}
      .form-stack{width:85vw}
      .field{height:70px; border-radius:20px}
      .field input{font-size:16px}
      .btn{width:200px; font-size:15px}
    }
  </style>
</head>
<body>
  <div class="bg-logo">
    <img src="iMark.png" alt="iMark background logo">
  </div>

  <div class="brand">
    <a href="index.html" target="_self">
      <img src="iMark.png" alt="iMark logo">
    </a>
  </div>

  <main>
    <div class="form-stack">
      <label class="field" for="username">
        <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 12c2.761 0 5-2.686 5-6S14.761 0 12 0 7 2.686 7 6s2.239 6 5 6zm0 2c-4.418 0-8 2.91-8 6.5V22a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-1.5C20 16.91 16.418 14 12 14z"/></svg>
        <input id="username" name="username" type="text" placeholder="Username" required>
      </label>

      <label class="field" for="email">
        <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2zm0 4-8 5L4 8V6l8 5 8-5v2z"/></svg>
        <input id="email" name="email" type="email" placeholder="Email" required>
      </label>

      <label class="field" for="password">
        <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 1a5 5 0 0 0-5 5v3H6a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2h-1V6a5 5 0 0 0-5-5zm-3 8V6a3 3 0 0 1 6 0v3H9z"/></svg>
        <input id="password" name="password" type="password" placeholder="Password" required>
      </label>

      <label class="field" for="confirm">
        <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 1a5 5 0 0 0-5 5v3H6a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2h-1V6a5 5 0 0 0-5-5zm-3 8V6a3 3 0 0 1 6 0v3H9z"/></svg>
        <input id="confirm" name="confirm" type="password" placeholder="Confirm Password" required>
      </label>

      <!-- button instead of plain link -->
      <button class="btn" id="signupBtn" type="button">SIGN UP</button>
      <p id="signupError" style="color:#fca5a5; margin-top:8px; display:none;"></p>

      <p class="alt">Have an account? <a href="login.html" target="_self">Login here</a></p>
    </div>
  </main>

  <footer>POWERED BY NULL SPACE</footer>

  <script>
    const signupBtn = document.getElementById("signupBtn");
    const usernameInput = document.getElementById("username");
    const emailInput = document.getElementById("email");
    const passwordInput = document.getElementById("password");
    const confirmInput = document.getElementById("confirm");
    const signupError = document.getElementById("signupError");

    signupBtn.addEventListener("click", async () => {
      const username = usernameInput.value.trim();
      const email = emailInput.value.trim();
      const password = passwordInput.value.trim();
      const confirm = confirmInput.value.trim();

      if (!username || !email || !password || !confirm) {
        signupError.textContent = "Please fill in all fields.";
        signupError.style.display = "block";
        return;
      }

      if (password !== confirm) {
        signupError.textContent = "Passwords do not match.";
        signupError.style.display = "block";
        return;
      }

      try {
        const res = await fetch("/api/auth/signup", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ username, email, password })
        });

        const data = await res.json();

        if (!res.ok) {
          signupError.textContent = data.message || "Signup failed.";
          signupError.style.display = "block";
          return;
        }

        // Optionally store user or just redirect to login
        // localStorage.setItem("imarkUser", JSON.stringify(data.user));

        // Redirect to login page after successful signup
        window.location.href = "login.html";
      } catch (err) {
        console.error(err);
        signupError.textContent = "Server error. Make sure the backend is running.";
        signupError.style.display = "block";
      }
    });
  </script>
</body>
</html>
